<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>تقرير تنفيذ برامج النشاط</title>

<!-- خط كايرو -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
    body {
        font-family: 'Cairo', sans-serif;
        margin: 40px;
    }

    .header-container {
        display: flex;
        justify-content: flex-start;
        align-items: flex-start;
    }
    .right-text {
        text-align: right;
        line-height: 1.4;
    }
    .right-text p {
        margin: 0;
    }

    .logo {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
    }
    .logo img {
        max-width: 110px;
    }

    .header-title {
        text-align: center;
        margin: 40px 0 10px 0;
    }

    /* خانات التحرير داخل العنوان */
    .inline-input {
        border: none;
        background: transparent;
        text-align: center;
        width: 60px;
        font-size: 18px;
        font-family: 'Cairo', sans-serif;
        outline: none;
    }
    .inline-input.term {
        width: 200px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin: 10px auto;
        text-align: center;
    }
    td, th {
        border: 1px solid #000;
        padding: 8px;
        vertical-align: middle;
        text-align: center;
    }

    /* ألوان العناوين */
    .program     { background-color: #d6eaff; font-weight: bold; }
    .field       { background-color: #dfffe0; font-weight: bold; }
    .date        { background-color: #fff9c4; font-weight: bold; }
    .duration    { background-color: #e1d4ff; font-weight: bold; }
    .count       { background-color: #ffe0b2; font-weight: bold; }
    .targets     { background-color: #e0c7a9; font-weight: bold; }
    .executed    { background-color: #ffd6e7; font-weight: bold; }
    .evidence    { background-color: #c9f0ff; font-weight: bold; }

    input, textarea {
        text-align: center;
        font-family: 'Cairo', sans-serif;
    }

    /* اجعل محتوى خانة "ما تم تنفيذه" بمحاذاة اليمين */
    .executed + td textarea {
        text-align: right;
        direction: rtl;
        resize: none; /* نمنع السحب اليدوي */
        overflow: hidden;
        min-height: 80px;
    }

    .signatures {
        margin-top: 15px;
        width: 100%;
        display: flex;
        justify-content: space-between;
        text-align: center;
    }
    .signatures div {
        width: 30%;
    }
    .signatures input {
        width: 150px;
        display: inline-block;
        margin-right: 5px;
    }

    .actions {
        margin: 15px 0;
        display: flex;
        gap: 10px;
        justify-content: center;
        flex-wrap: wrap;
    }

    .btn {
        padding: 10px 16px;
        font-size: 16px;
        cursor: pointer;
        font-family: 'Cairo', sans-serif;
        border: 1px solid #222;
        background: #f7f7f7;
        border-radius: 8px;
    }

    .shawahid-container {
        display: flex;
        gap: 10px;
        justify-content: center;
        flex-wrap: wrap;
    }
    .shawahid-container img {
        width: 120px;
        height: 120px;
        object-fit: cover;
        border: 1px solid #ccc;
        border-radius: 5px;
    }

    @media print {
        .upload-logo,
        input[type="file"],
        .actions {
            display: none !important;
        }
    }
</style>
</head>
<body>

<div class="header-container">
    <div class="right-text">
        <p>المملكة العربية السعودية</p>
        <p>وزارة التعليم</p>
        <p>الإدارة العامة للتعليم بمنطقة الباحة</p>
        <p>مكتب تعليم الوسط</p>
        <p>مدرسة جدة بنت عبيد الأنصارية بالبكير</p>
    </div>
</div>

<div class="logo">
    <img id="ministryLogo" src="" alt="شعار الوزارة">
    <div class="upload-logo">
        <input id="logoInput" type="file" accept="image/*" onchange="previewLogo(event)">
    </div>
</div>

<div class="header-title">
    <h2>
        تقرير تنفيذ برامج النشاط الطلابي للعام
        <input type="text" value="1447" class="inline-input"> هـ -
        <input type="text" value="1448" class="inline-input"> هـ
        (<input type="text" class="inline-input term" value="الفصل الدراسي الأول">)
    </h2>
</div>

<div class="actions">
    <button class="btn" onclick="resetAll()">➕ إنشاء جديد</button>
    <button class="btn" onclick="window.print()">🖨️ طباعة التقرير</button>
</div>

<table>
    <tr>
        <td class="program">البرنامج</td>
        <td><input type="text" style="width:95%"></td>
        <td class="field">المجال</td>
        <td><input type="text" style="width:95%"></td>
    </tr>
    <tr>
        <td class="date">التاريخ</td>
        <td><input type="text" placeholder="مثال: 1447/02/15 هـ" style="width:95%"></td>
        <td class="duration">مدة البرنامج</td>
        <td><input type="text" style="width:95%"></td>
    </tr>
    <tr>
        <td class="count">العدد</td>
        <td><input type="number" style="width:95%"></td>
        <td class="targets">المستهدفون</td>
        <td><input type="text" style="width:95%"></td>
    </tr>
    <tr>
        <td colspan="2" class="executed">ما تم تنفيذه</td>
        <td colspan="2"><textarea id="executedText" style="width:98%;"></textarea></td>
    </tr>
    <tr>
        <td colspan="2" class="evidence">الشواهد</td>
        <td colspan="2">
            <input id="shawahidInput" type="file" accept="image/*" multiple onchange="previewShawahid(event)">
            <div class="shawahid-container" id="shawahidPreview"></div>
        </td>
    </tr>
</table>

<div class="signatures">
    <div>
        <label>رائدة النشاط :</label>
        <input type="text">
        <p>التوقيع</p>
    </div>
    <div>
        <label>المعلمة المنفذة :</label>
        <input type="text">
        <p>التوقيع</p>
    </div>
    <div>
        <label>مديرة المدرسة :</label>
        <input type="text">
        <p>التوقيع</p>
    </div>
</div>

<script>
function previewLogo(event) {
    const logo = document.getElementById("ministryLogo");
    logo.src = URL.createObjectURL(event.target.files[0]);
}

function previewShawahid(event) {
    const container = document.getElementById("shawahidPreview");
    container.innerHTML = "";
    const files = Array.from(event.target.files).slice(0, 5);
    files.forEach(file => {
        const img = document.createElement("img");
        img.src = URL.createObjectURL(file);
        container.appendChild(img);
    });
}

/* دالة تفريغ جميع الخانات للبدء كتقرير جديد */
function resetAll() {
    // تفريغ النصوص والأرقام
    document.querySelectorAll('input[type="text"], input[type="number"]').forEach(el => {
        el.value = "";
    });

    // تفريغ المناطق النصية
    document.querySelectorAll('textarea').forEach(el => {
        el.value = "";
        el.style.height = "80px"; // إعادة الارتفاع الافتراضي
    });

    // تفريغ ملفات الصور والشعار
    document.querySelectorAll('input[type="file"]').forEach(el => {
        try { el.value = null; } catch(e) { el.value = ""; }
    });

    // إزالة عرض الشواهد
    const container = document.getElementById("shawahidPreview");
    if (container) container.innerHTML = "";

    // إزالة الشعار
    const logo = document.getElementById("ministryLogo");
    if (logo) {
        logo.removeAttribute("src");
        logo.alt = "شعار الوزارة";
    }

    // إعادة التمرير للأعلى (اختياري)
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* اجعل خانة ما تم تنفيذه تتمدد حسب النص */
const executedText = document.getElementById("executedText");
executedText.addEventListener("input", function() {
    this.style.height = "auto";
    this.style.height = (this.scrollHeight) + "px";
});
</script>

</body>
</html>